<head>
 <link href="fastformat.css" rel="stylesheet" type="text/css">
</head>

<table width = "100%">
 <tr>
  <td align = "left" valign = "middle">
   <a href = "http://www.synesis.com.au/"><img src = "syn_head.jpg" border = "0" width = "343" height = "50" alt = "Synesis Software" /></a>
  </td>
  <td align = "center" valign = "middle">
<!--
   <a href = "http://www.fastformat.org/"><img src = "fastformat-420x140.jpg" border = "0" width = "420" height = "120" alt = "FastFormat" /></a>
-->
  </td>
  <td align = "right" valign = "middle">
   <a href = "http://stlsoft.org"><img src = "stlsoft200x100.jpg" border = "0" width = "100" height = "50" alt = "STLSoft - ... Robust, Lightweight, Cross-platform, Template Software ..." /></a>
  </td>
 </tr>
 <tr>
  <td width = "100%" colspan = "3">
   <hr width = "100%">
  </td>
 </tr>
</table>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="examples.html"><span>Examples</span></a></li>
  </ul>
</div>
<h1>examples/example.overload.3.record_insert/example.overload.3.record_insert.cpp</h1><div class="fragment"><pre class="fragment"><span class="comment">/* /////////////////////////////////////////////////////////////////////////</span>
<span class="comment"> * File:        example.overload.3.record_insert.cpp</span>
<span class="comment"> *</span>
<span class="comment"> * Purpose:     Implementation file for the example.overload.3.record_insert project.</span>
<span class="comment"> *</span>
<span class="comment"> * Created:     20th September 2008</span>
<span class="comment"> * Updated:     22nd June 2010</span>
<span class="comment"> *</span>
<span class="comment"> * Status:      Wizard-generated</span>
<span class="comment"> *</span>
<span class="comment"> * License:     (Licensed under the Synesis Software Open License)</span>
<span class="comment"> *</span>
<span class="comment"> *              Copyright (c) 2008-2010, Synesis Software Pty Ltd.</span>
<span class="comment"> *              All rights reserved.</span>
<span class="comment"> *</span>
<span class="comment"> *              www:        http://www.synesis.com.au/software</span>
<span class="comment"> *</span>
<span class="comment"> * ////////////////////////////////////////////////////////////////////// */</span>


<span class="comment">/* FastFormat Header Files */</span>
<span class="preprocessor">#include &lt;<a class="code" href="ostream_8hpp.html" title="[C++ only] A FastFormat sink for IOStreams&amp;#39; std::ostream.">fastformat/sinks/ostream.hpp</a>&gt;</span>
<span class="preprocessor">#include &lt;<a class="code" href="ff_8hpp.html" title="[C++ only] Equivalent to the FastFormat C++ primary include fastformat/fastformat...">fastformat/ff.hpp</a>&gt;</span>

<span class="comment">/* STLSoft Header Files */</span>
<span class="preprocessor">#include &lt;stlsoft/stlsoft.h&gt;</span>

<span class="comment">/* PlatformSTL Header Files */</span>
<span class="preprocessor">#include &lt;platformstl/platformstl.hpp&gt;</span>

<span class="preprocessor">#include &lt;platformstl/performance/performance_counter.hpp&gt;</span>

platformstl_ns_using(performance_counter)


<span class="comment">/* Standard C++ Header Files */</span>
<span class="preprocessor">#include &lt;exception&gt;</span>
<span class="preprocessor"></span><span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;sstream&gt;</span>

<span class="comment">/* Standard C Header Files */</span>
<span class="preprocessor">#include &lt;stdlib.h&gt;</span>

<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; \</span>
<span class="preprocessor">    defined(_DEBUG)</span>
<span class="preprocessor"></span><span class="preprocessor"># include &lt;crtdbg.h&gt;</span>
<span class="preprocessor">#endif </span><span class="comment">/* _MSC_VER) &amp;&amp; _DEBUG */</span>

<span class="comment">/* /////////////////////////////////////////////////////////////////////////</span>
<span class="comment"> * Macros and definitions</span>
<span class="comment"> */</span>


<span class="comment">/* /////////////////////////////////////////////////////////////////////////</span>
<span class="comment"> * Globals</span>
<span class="comment"> */</span>


<span class="comment">/* /////////////////////////////////////////////////////////////////////////</span>
<span class="comment"> * Typedefs</span>
<span class="comment"> */</span>

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span><span class="keyword">typedef</span> std::string     string_t;
<span class="preprocessor">#endif </span><span class="comment">/* 0 */</span>

<span class="comment">/* /////////////////////////////////////////////////////////////////////////</span>
<span class="comment"> * Record insertion functions</span>
<span class="comment"> */</span>

<span class="keyword">const</span> <span class="keywordtype">int</span>   intNaN = 0x7fffffff;

<span class="keyword">class </span>BusinessRecord
{
<span class="keyword">public</span>:
    BusinessRecord()
        : member_1(1)
        , member_2(-1)
        , member_3(20)
        , member_4(-20)
        , member_5(303)
        , member_6(-303)
        , member_7(4040)
        , member_8(-4040)
        , member_9(50505)
        , member_10(-50505)
        , member_11(606060)
        , member_12(-606060)
        , member_13(7070707)
        , member_14(-7070707)
        , member_15(80808080)
        , member_16(-80808080)
        , member_17(909090909)
        , member_18(-909090909)
        , member_19(intNaN)
    {}

<span class="keyword">public</span>:
    <span class="keywordtype">int</span> member_1;
    <span class="keywordtype">int</span> member_2;
    <span class="keywordtype">int</span> member_3;
    <span class="keywordtype">int</span> member_4;
    <span class="keywordtype">int</span> member_5;
    <span class="keywordtype">int</span> member_6;
    <span class="keywordtype">int</span> member_7;
    <span class="keywordtype">int</span> member_8;
    <span class="keywordtype">int</span> member_9;
    <span class="keywordtype">int</span> member_10;
    <span class="keywordtype">int</span> member_11;
    <span class="keywordtype">int</span> member_12;
    <span class="keywordtype">int</span> member_13;
    <span class="keywordtype">int</span> member_14;
    <span class="keywordtype">int</span> member_15;
    <span class="keywordtype">int</span> member_16;
    <span class="keywordtype">int</span> member_17;
    <span class="keywordtype">int</span> member_18;
    <span class="keywordtype">int</span> member_19;
};

<span class="keyword">class </span>BusinessAdapter
{
<span class="keyword">public</span>:
    BusinessAdapter()
        : m_tablename(<span class="stringliteral">"order_records"</span>)
        , m_id_1(12345678)
        , m_ss()
        , m_slice()
    {}
<span class="keyword">private</span>:
    BusinessAdapter(BusinessAdapter <span class="keyword">const</span>&amp;);
    BusinessAdapter&amp; operator =(BusinessAdapter <span class="keyword">const</span>&amp;);

<span class="keyword">public</span>:
    std::string makeSlice(<span class="keyword">const</span> <span class="keywordtype">int</span> val);

    std::string insertRecord( <span class="keyword">const</span> BusinessRecord&amp; r );
    std::string insertRecord_ff_fmt_1( <span class="keyword">const</span> BusinessRecord&amp; r );
    std::string insertRecord_ff_fmt_2( <span class="keyword">const</span> BusinessRecord&amp; r );
    std::string insertRecord_ff_write( <span class="keyword">const</span> BusinessRecord&amp; r );

    std::string         m_tablename;
    <span class="keywordtype">int</span>                 m_id_1;
    std::stringstream   m_ss;
    std::stringstream   m_slice;

};

std::string BusinessAdapter::insertRecord( <span class="keyword">const</span> BusinessRecord&amp; r )
{
    <span class="comment">// build the insert statement</span>
    m_ss.str(<span class="stringliteral">""</span>);
    m_ss &lt;&lt; <span class="stringliteral">"insert["</span> &lt;&lt; m_tablename    &lt;&lt; <span class="stringliteral">";("</span>;
    m_ss &lt;&lt; makeSlice(r.member_1)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_2)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_3)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_4)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(m_id_1)           &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_5)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_6)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_7)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_8)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_9)       &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_10)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_11)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_12)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_13)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_14)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_15)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_16)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_17)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_18)      &lt;&lt; <span class="stringliteral">";"</span>;
    m_ss &lt;&lt; makeSlice(r.member_19)      &lt;&lt; <span class="stringliteral">")]"</span>;

<span class="comment">// do something w/ m_ss.str().c_str()</span>

    <span class="keywordflow">return</span> m_ss.str();
}

std::string BusinessAdapter::makeSlice(<span class="keyword">const</span> <span class="keywordtype">int</span> val)
{
    m_slice.str(<span class="stringliteral">""</span>);
    <span class="keywordflow">if</span> ( val == intNaN )
        m_slice &lt;&lt; <span class="stringliteral">"0N"</span>;
    <span class="keywordflow">else</span>
        m_slice &lt;&lt; val;
    <span class="keywordflow">return</span> m_slice.str();
}

<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<span class="keyword">static</span> stlsoft::basic_shim_string&lt;char, 20&gt; make_shim_string(T <span class="keyword">const</span>&amp; t)
{
    <span class="keywordflow">return</span> stlsoft::basic_shim_string&lt;char, 20&gt;(t.data(), t.size());
}


<span class="keyword">static</span> stlsoft::basic_shim_string&lt;char, 20&gt;
 make_slice(<span class="keyword">const</span> <span class="keywordtype">int</span> val)
{
    <span class="keywordflow">if</span>(intNaN == val)
    {
        <span class="keywordflow">return</span> stlsoft::basic_shim_string&lt;char, 20&gt;(<span class="stringliteral">"0N"</span>);
    }
    <span class="keywordflow">else</span>
    {
        <span class="keywordflow">return</span> make_shim_string(<a name="a0"></a><a class="code" href="namespacefastformat_1_1filters.html#c275db52c9f1a8c575741901d7798cdd" title="Degenerate case, which does no conversion.">fastformat::filters::filter_type</a>(val, &amp;val, static_cast&lt;char const*&gt;(0)));
    }
}

std::string BusinessAdapter::insertRecord_ff_fmt_1( <span class="keyword">const</span> BusinessRecord&amp; r )
{
    std::string result;

    <a name="a1"></a><a class="code" href="group__group____interface__functions____api__format.html#ga6c9104886b4267ca09e49d6b0a37aca" title="Formats 48 objects of arbitrary type to the given sink.">ff::fmt</a>(
        result
    ,   <span class="stringliteral">"insert[{0};({1};{2};{3};{4};{5};{6};{7};{8};{9};{10};{11};{12};{13};{14};{15};{16};{17};{18};{19};{20})]"</span>
    ,   m_tablename
    ,   make_slice(r.member_1)
    ,   make_slice(r.member_2)
    ,   make_slice(r.member_3)
    ,   make_slice(r.member_4)
    ,   make_slice(m_id_1)
    ,   make_slice(r.member_5)
    ,   make_slice(r.member_6)
    ,   make_slice(r.member_7)
    ,   make_slice(r.member_8)
    ,   make_slice(r.member_9)
    ,   make_slice(r.member_10)
    ,   make_slice(r.member_11)
    ,   make_slice(r.member_12)
    ,   make_slice(r.member_13)
    ,   make_slice(r.member_14)
    ,   make_slice(r.member_15)
    ,   make_slice(r.member_16)
    ,   make_slice(r.member_17)
    ,   make_slice(r.member_18)
    ,   make_slice(r.member_19)
    );

    <span class="keywordflow">return</span> result;
}

std::string BusinessAdapter::insertRecord_ff_fmt_2( <span class="keyword">const</span> BusinessRecord&amp; r )
{
    std::string result;

    <a class="code" href="group__group____interface__functions____api__format.html#ga6c9104886b4267ca09e49d6b0a37aca" title="Formats 48 objects of arbitrary type to the given sink.">ff::fmt</a>(
        result
    ,   <span class="stringliteral">"insert[{1}{0}({2}{0}{3}{0}{4}{0}{5}{0}{6}{0}{7}{0}{8}{0}{9}{0}{10}{0}{11}{0}{12}{0}{13}{0}{14}{0}{15}{0}{16}{0}{17}{0}{18}{0}{19}{0}{20}{0}{21})]"</span>
    ,   <span class="stringliteral">";"</span>
    ,   m_tablename
    ,   make_slice(r.member_1)
    ,   make_slice(r.member_2)
    ,   make_slice(r.member_3)
    ,   make_slice(r.member_4)
    ,   make_slice(m_id_1)
    ,   make_slice(r.member_5)
    ,   make_slice(r.member_6)
    ,   make_slice(r.member_7)
    ,   make_slice(r.member_8)
    ,   make_slice(r.member_9)
    ,   make_slice(r.member_10)
    ,   make_slice(r.member_11)
    ,   make_slice(r.member_12)
    ,   make_slice(r.member_13)
    ,   make_slice(r.member_14)
    ,   make_slice(r.member_15)
    ,   make_slice(r.member_16)
    ,   make_slice(r.member_17)
    ,   make_slice(r.member_18)
    ,   make_slice(r.member_19)
    );

    <span class="keywordflow">return</span> result;
}

std::string BusinessAdapter::insertRecord_ff_write( <span class="keyword">const</span> BusinessRecord&amp; r )
{
    std::string result;

    <a name="a2"></a><a class="code" href="group__group____interface__functions____api__write.html#g352447ff5169b5f684629ec58757c0e9" title="Writes 48 objects of arbitrary type to the given sink.">ff::write</a>(
        result
    ,   <span class="stringliteral">"insert["</span>,      m_tablename
    ,   <span class="stringliteral">";("</span>,           make_slice(r.member_1)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_2)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_3)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_4)
    ,   <span class="stringliteral">";"</span>,            make_slice(m_id_1)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_5)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_6)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_7)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_8)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_9)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_10)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_11)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_12)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_13)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_14)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_15)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_16)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_17)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_18)
    ,   <span class="stringliteral">";"</span>,            make_slice(r.member_19)
    ,   <span class="stringliteral">")]"</span>
    );

    <span class="keywordflow">return</span> result;
}

<span class="comment">/* ////////////////////////////////////////////////////////////////////// */</span>

<span class="preprocessor">#ifdef _DEBUG</span>
<span class="preprocessor"></span><span class="keyword">const</span> <span class="keywordtype">size_t</span> ITERATIONS =   1;
<span class="preprocessor">#else </span><span class="comment">/* ? _DEBUG */</span>
<span class="keyword">const</span> <span class="keywordtype">size_t</span> ITERATIONS =   100000;
<span class="preprocessor">#endif </span><span class="comment">/* _DEBUG */</span>

<span class="keyword">static</span> <span class="keywordtype">int</span> main_(<span class="keywordtype">int</span> <span class="comment">/* argc */</span>, <span class="keywordtype">char</span>** <span class="comment">/*argv*/</span>)
{
    platformstl::performance_counter                counter;
    platformstl::performance_counter::interval_type tm;
    platformstl::performance_counter::interval_type tm_ff_fmt_1;
    platformstl::performance_counter::interval_type tm_ff_fmt_2;
    platformstl::performance_counter::interval_type tm_ff_write;

    BusinessRecord  record;
    BusinessAdapter adapter;
    std::string     result;
    std::string     result_ff_fmt_1;
    std::string     result_ff_fmt_2;
    std::string     result_ff_write;

    { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != 2; ++i)
    {
        counter.start();
        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != ITERATIONS; ++i)
        {
            result = adapter.insertRecord(record);
        }}
        counter.stop();
        tm = counter.get_milliseconds();
    }}

    { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != 2; ++i)
    {
        counter.start();
        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != ITERATIONS; ++i)
        {
            result_ff_fmt_1 = adapter.insertRecord_ff_fmt_1(record);
        }}
        counter.stop();
        tm_ff_fmt_1 = counter.get_milliseconds();
    }}

    { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != 2; ++i)
    {
        counter.start();
        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != ITERATIONS; ++i)
        {
            result_ff_fmt_2 = adapter.insertRecord_ff_fmt_2(record);
        }}
        counter.stop();
        tm_ff_fmt_2 = counter.get_milliseconds();
    }}

    { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != 2; ++i)
    {
        counter.start();
        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i != ITERATIONS; ++i)
        {
            result_ff_write = adapter.insertRecord_ff_write(record);
        }}
        counter.stop();
        tm_ff_write = counter.get_milliseconds();
    }}


    <a name="a3"></a><a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cerr, <span class="stringliteral">"IOStreams:\t{0}"</span>, tm);
    <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cerr, <span class="stringliteral">"FastFormat.Format(1):\t{0}"</span>, tm_ff_fmt_1);
    <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cerr, <span class="stringliteral">"FastFormat.Format(2):\t{0}"</span>, tm_ff_fmt_2);
    <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cerr, <span class="stringliteral">"FastFormat.Write:\t{0}"</span>, tm_ff_write);

    <span class="keywordflow">if</span>(result_ff_fmt_1 != result)
    {
        <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"source strings do not match\nIOStreams:\n[{0}]\nFastFormat.Format(1):\n[{1}]\n"</span>, result, result_ff_fmt_1);

        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; ; ++i)
        {
            <span class="keywordflow">if</span>(i == result.size())
            {
                <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"result exhausted; len={0}"</span>, i);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == result_ff_fmt_1.size())
            {
                <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"result_ff_fmt_1 exhausted; len={0}"</span>, i);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span>(result[i] != result_ff_fmt_1[i])
                {
                    <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"different characters at index {0}"</span>, i);
                    <span class="keywordflow">break</span>;
                }
            }
        }}
    }

    <span class="keywordflow">if</span>(result_ff_fmt_2 != result)
    {
        <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"source strings do not match\nIOStreams:\n[{0}]\nFastFormat.Format(2):\n[{1}]\n"</span>, result, result_ff_fmt_2);

        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; ; ++i)
        {
            <span class="keywordflow">if</span>(i == result.size())
            {
                <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"result exhausted; len={0}"</span>, i);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == result_ff_fmt_2.size())
            {
                <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"result_ff_fmt_2 exhausted; len={0}"</span>, i);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span>(result[i] != result_ff_fmt_2[i])
                {
                    <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"different characters at index {0}"</span>, i);
                    <span class="keywordflow">break</span>;
                }
            }
        }}
    }

    <span class="keywordflow">if</span>(result_ff_write != result)
    {
        <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"source strings do not match\nIOStreams:\n[{0}]\nFastFormat.Write:\n[{1}]\n"</span>, result, result_ff_write);

        { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; ; ++i)
        {
            <span class="keywordflow">if</span>(i == result.size())
            {
                <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"result exhausted; len={0}"</span>, i);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(i == result_ff_write.size())
            {
                <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"result_ff_write exhausted; len={0}"</span>, i);
                <span class="keywordflow">break</span>;
            }
            <span class="keywordflow">else</span>
            {
                <span class="keywordflow">if</span>(result[i] != result_ff_write[i])
                {
                    <a class="code" href="group__group____interface__functions____api__format.html#gbdb122ea459b984ed8f0e691c37c8989" title="Formats 48 objects of arbitrary type to the given sink, appending a newline.">ff::fmtln</a>(std::cout, <span class="stringliteral">"different characters at index {0}"</span>, i);
                    <span class="keywordflow">break</span>;
                }
            }
        }}
    }

    <span class="keywordflow">return</span> EXIT_SUCCESS;
}

<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)
{
    <span class="keywordtype">int</span>             res;

<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; \</span>
<span class="preprocessor">    defined(_DEBUG)</span>
<span class="preprocessor"></span>    _CrtMemState    memState;
<span class="preprocessor">#endif </span><span class="comment">/* _MSC_VER &amp;&amp; _MSC_VER */</span>

<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; \</span>
<span class="preprocessor">    defined(_DEBUG)</span>
<span class="preprocessor"></span>    _CrtMemCheckpoint(&amp;memState);
<span class="preprocessor">#endif </span><span class="comment">/* _MSC_VER &amp;&amp; _MSC_VER */</span>

<span class="preprocessor">#if 0</span>
<span class="preprocessor"></span>    { <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0; i &lt; 0xffffffff; ++i){} }
<span class="preprocessor">#endif </span><span class="comment">/* 0 */</span>

    <span class="keywordflow">try</span>
    {
<span class="preprocessor">#if defined(_DEBUG) || \</span>
<span class="preprocessor">    defined(__SYNSOFT_DBS_DEBUG)</span>
<span class="preprocessor"></span><span class="preprocessor">#endif </span><span class="comment">/* debug */</span>

        res = main_(argc, argv);
    }
    <span class="keywordflow">catch</span>(std::exception&amp; x)
    {
        std::cerr &lt;&lt; <span class="stringliteral">"Unexpected exception: "</span> &lt;&lt; x.what() &lt;&lt; std::endl;

        res = EXIT_FAILURE;
    }
    <span class="keywordflow">catch</span>(...)
    {

        res = EXIT_FAILURE;
    }

<span class="preprocessor">#if defined(_MSC_VER) &amp;&amp; \</span>
<span class="preprocessor">    defined(_DEBUG)</span>
<span class="preprocessor"></span>    _CrtMemDumpAllObjectsSince(&amp;memState);
<span class="preprocessor">#endif </span><span class="comment">/* _MSC_VER) &amp;&amp; _DEBUG */</span>

    <span class="keywordflow">return</span> res;
}

<span class="comment">/* ///////////////////////////// end of file //////////////////////////// */</span>
</pre></div> <table width = "100%">
 <tr>
  <td width = "100%" colspan = "2">
   <hr width = "100%">
  </td>
 </tr>
 <tr>
  <td align = "center" valign = "middle">
   <font size = "-1">
    <a href = "http://fastformat.org/"><b>FastFormat</b></a>
    Library documentation 
    © Matthew Wilson, 2006-2010
   </font>
  </td>
  <td align = "center" valign = "middle">
   <a href="http://sourceforge.net">
    <img src="http://sourceforge.net/sflogo.php?group_id=139253&amp;type=2" width="125" height="37" border="0" alt="SourceForge.net Logo" />
   </a>
  </td>
 </tr>
</table>
